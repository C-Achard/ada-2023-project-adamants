<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wikispeedia datastory</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dialog.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="js/home.js"></script>
    <script src="js/dialog.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap');
      </style>
</head>
<body>
    <script>
        AOS.init();
      </script>
    <section class="content header breakpoint" id="home">
        <div class="heading-image"></div>
        <div class="heading-text">
            <h1>Have you ever gotten lost on Wikipedia ? This little game will bring you back! </h1>
            <p>A clustering datastory</p>
            <div class="arrow" onclick="scrollStart()"></div>
        </div>
    </section>
    
    <div id="dotSlider">
        <span class="dot active" onclick="scrollToSection('home')"></span>
        <span class="dot" onclick="scrollToSection('section1')"></span>
        <span class="dot" onclick="scrollToSection('section2')"></span>
        <span class="dot" onclick="scrollToSection('section3')"></span>
        <span class="dot" onclick="scrollToSection('section4')"></span>
        <span class="dot" onclick="scrollToSection('section5')"></span>
        <span class="dot" onclick="scrollToSection('section6')"></span>
    </div>

    <div id="scrollDialogBob" class="scroll-dialog hidden Bob">
        <div class="avatar">
            <img src="src/avatar_bob.png" alt="Avatar">
        </div>
        <div class="dialog-content" id="scrollDialogTextBob">
            <p>

            </p>
        </div>
    </div>
    <div id="scrollDialogAda" class="scroll-dialog hidden Ada">
        <div class="avatar">
            <img src="src/ada_lovelace.png" alt="Avatar">
        </div>
        <div class="dialog-content" id="scrollDialogTextAda">
            <p>

            </p>
        </div>
    </div>
    <div id="dialogBackground" class="dialog-background hidden"></div>
    <div class="content_container" id="content">
        
        <section class="content" id="section1">
            <div class="item">
            <h2>In-game behaviours</h2>
                <ul class="features">
                    <li>
                        <div>
                            <h4>
                                Duration of the path in seconds
                            </h4>
                            <p>
                                This is the time taken by the player to complete the path.
                            </p>
                        </div>  
                        <img  src="src/figures/leiden/histogramms/durationInSec_histogram.png" alt="durationInSec_histogram">
                    </li>
                    <li>
                        <div>
                        <h4>
                            The number of backtracks
                        </h4>
                        <p>
                            This feature is the number of backtracks made by the player during the path.
                        </p>
                    </div>
                        <img src="src/figures/leiden/histogramms/backtrack_histogram.png" alt="backtrack_histogram">

                    </li>
                    <li>
                        <div>
                        <h4>
                            The number of paths attempted by the player before the one played
                        </h4>
                        <p>
                            This feature informs us how much training the player had before he played the path recorded.
                            It is negatively correlated with the time taken to finish the path recorded, even though ~50% of the IP addresses appear only 1 time (heavily right-skewed distribution). 
                        </p>
                    </div>
                        <img src="src/figures/leiden/histogramms/numberOfPath_histogram.png" alt="numberOfPath_histogram">
                    </li>
                    <li>
                        <div>
                        <h4>
                            Position mean
                        </h4>
                        <p>
                            Character position of succeding clicked link on article page, averaged across all edges of path.</p>
                        </div>
                            <img src="src/figures/leiden/histogramms/position_mean_histogram.png" alt="position_mean_histogram">
                    </li>
                    <li>
                        <div>
                        <h4>
                            Position std
                        </h4>
                        <p>
                            Standard deviation of character position of succeding clicked link within a path.</p>
                        </div>
                            <img src="src/figures/leiden/histogramms/position_std_histogram.png" alt="position_std_histogram">
                        
                    </li>
                    <li>
                        <div>
                        <h4>
                            The path length
                        </h4>
                        <p>
                            Simple measure of number of edges in path (pages clicked on) from beginning to end. This also therefore contains player backtracks, which will increase the count of edges in path.
                        </p>
                    </div>
                        <img src="src/figures/leiden/histogramms/path_length_histogram.png" alt="path_length_histogram">
                        
                    </li>  
                    <li>
                        <div>
                        <h4>
                            The ratio between the user path length and the shortest path length
                        </h4>
                        <p>
                            This feature is the ratio between the length of the path taken by the player and the length of the shortest path between the start and end articles.
                        </p>
                    </div>
                        <img src="src/figures/leiden/histogramms/ratio_histogram.png" alt="ratio_histogram">
                        
                    </li>
                </ul>
        </div>
        </section>

        <section class="content" id="section2">
            <div class="item">
            <h2>But one can also think of more clever and more sophisticated features!</h2>
            <ul class="features">
                <li>
                    <div>
                    <h4>
                        The coarse mean time per edge
                    </h4>
                    <p>
                        Measure of amount of time, on average, that the player took to travel from one edge to another in the path. It is called "coarse" because it is a global measure, 
                        that does not take into account outlier edges like the median could. This is especially noticeable on paths where the player disconnected, for example.
                    </p>
                </div>
                    <img src="src/figures/leiden/histogramms/coarse_mean_time_histogram.png" alt="coarse_mean_time_histogram">
                </li>
                <li>
                    <div>
                    <h4>
                        The path closeness absolute sum
                    </h4>
                    <p>
                        As each page in the path has a closeness centrality associated to it from the full network of Wikipedia,
                        this features is obtained by looking at the derivative of the closeness centrality of each page in the path (that is, the delta between the closeness centrality of a page
                        and the previous one in the path) and summing the absolute value of these deltas before and after the maximal degree page in the path. 
                        This is meant to quantify if the player is strongly looking for a hub page in the path, reaches it (as the maximal degree page is assumed to be a hub page) and then goesto 
                        a specific page from there, i.e. the target page. Indeed, a good player is expected to have a strongly positive delta before the maximal degree page and a strongly
                        negative delta after it. We take the absolute value then sum them to have a single feature that aims at quantifying this behavior.
                    </p>
                </div>
                    <img src="src/figures/leiden/histogramms/path_closeness_abs_sum_histogram.png" alt="path_closeness_absolute_sum_histogram">                
                    <li>
                    <div>
                    <h4>
                        The semantic similarity metric
                    </h4>
                    <p>
                        This is a measure of the average similarity between two successive terms in the given path. 
                        The feature is calculated by computing the cosine similarity (normalised dot product) between embeddings (one-hot vectors projected to a lower dimensionality subspace)
                         given by a sentence transformer, which is a model specifically trained in order to give embeddings which have "semantically relevant" / 
                         "semantically informative" relative positions. As such, the cosine similarity gives a measure of logical similarity of the words. 
                         A value of -1 represents opposite meanings / topics, around 0 means unrelated, and around 1 means highly similar meanings / topics. 
                         The mean of this is supposed to approximately capture how related topics globally were on a given path.
                    </p>
                </div>
                    <img src="src/figures/leiden/histogramms/semantic_similarity_histogram.png" alt="semantic_similarity_histogram">

                </li>
            </ul>
            <p>
                We can see that the features in the first column are very heavy tailed, for this reason we will apply a log transform to them.<br>
                Taking the log of backtrack (2nd row first column) does not help (probably as it is discrete and has only a few different values).<br>
                We will then normalize the features:
                <ul>
                    <li>We use z-score normalization</li>
                    <li>NaN values in certain features are replaced by the mean</li>
                </ul>
            </p>
            <div class="breakpoint" ></div>
        </div>
        </section>
        <section class="content" id="section3">
           <div class="item">
                <p>
                    Once features have been extracted, it’s time for clustering. We performed clustering to validate that we achieve a meaningful set of latent variables for player paths,
                    in addition to being able to classify each type of player. <br>
                    We tested many clustering techniques and chose the Leiden clustering method, which works best for our data.
                </p>
                <p class="quote">
                    The Leiden algorithm is a clustering method that is an improved version of the Louvain algorithm. It aims to identify cohesive groups or clusters within a larger network 
                    by optimizing the network's modularity, which measures the strength of division into communities. 
                    The Leiden algorithm computes a clustering on a KNN graph obtained from the PC reduced expression space. It starts by assigning each node in the network to its own cluster,
                    which forms the initial partition. It then iterates through each node, considering moving it to a neighbouring cluster to see if it improves the network's modularity.
                    This process continues until no further improvements can be made, resulting in a refined partition of the network where nodes in the same cluster are more connected to each
                    other than to nodes in other clusters. 
                    Leiden creates clusters by considering the number of links between nodes in a cluster versus the overall expected number of links in the dataset.
                    <a class="source" href="https://www.nature.com/articles/s41598-019-41695-z">nature.com</a>
                </p>
                <p>
                    The following heatmap shows the clustering results, with columns representing features and rows for each of the 5  clusters. 
                    The values and colours represent the variation from the mean for each feature of each cluster.
                </p>
                <img src="src/figures/leiden/heatmap_features_means_per_cluster.png" alt="histograms_features_colored_by_cluster">
                <p>
                    The semantic similarity feature doesn’t seem to vary too much across clusters. This can be interpreted in the following way: the performance and strategies of the players do
                    not depend too much on the initial and target articles. 
                    Simply put, the words and their meaning are more or less alike independently of their clusters.
                </p>
                <p>
                    Right away we notice some clusters are very distinct. For others, it’s less clear. Let’s dive in cluster by cluster, shall we?!
                </p>
                </div>
        </section>

        <section class="content" id="section4">
            <div class="item">
                <h2>
                    The clusters
                </h2>
                <div class="cluster_container">
                    <div class="cluster" id="cluster0">
                        <h4>The slow (naturally bad) ones</h4>
                        <p>
                            They are relatively slow, do not backtrack, click lower on the article, but this varies, stay a while on each page (the most amount),
                            have a high ratio (one of the worst)
                        </p>
                    </div>
                    <div class="cluster" id="cluster1">
                        <h4>The short/fast ones</h4>
                        <p>
                            They are very quick, click early on the page most times, and ratio so good because they do not finish most of their games:
                            ( so ratio = user path/ shortest path can be even greater than 1). Small ratio but bias, path length so short because they do not finish, 
                            however they seem to reach hubs fast
                        </p>
                    </div>
                    <div class="cluster" id="cluster2">
                        <h4>The lucky (naturally good) ones</h4>
                        <p>
                            They are fast, do not backtrack, click on an early links most times, finish most times but do not with a perfect ratio, as they do not reach hubs fast.
                        </p>
                    </div>
                    <div class="cluster" id="cluster3">
                        <h4>The lost ones</h4>
                        <p>
                            They are slow, backtrack very frequently, have long paths, do not reach hubs easily (don’t play very well), and have an overall pretty bad ratio.
                        </p>
                    </div>
                    <div class="cluster" id="cluster4">
                        <h4>The experimented ones</h4>
                        <p>
                            They are fast, do not backtrack much, have done a lot of games before, and finish most of their games.
                        </p>
                    </div>
                </div>
                <p>
                    The figure below shows the number or paths or datapoints in each cluster.
                </p>
                <img src="src/figures/leiden/number_of_paths_per_cluster.png" alt="number_of_paths_per_cluster">
                <p>
                    Additionally, the two following figures show the distributions and boxplot of each feature coloured for each cluster.
                    The information here is the same as discussed previously, but visualized in a different way.
                </p>
                <img src="src/figures/leiden/histograms_features_colored_by_cluster.png" alt="histograms_features_colored_by_cluster">
                <img src="src/figures/leiden/boxplots_features_colored_by_cluster.png" alt="boxplot_features_colored_by_cluster">
                
                <p>
                    In these results all timed-out games were removed. What happens if we leave them in? Well, as shown by the figure below, a 6th cluster is created.
                </p>
                <img src="src/figures/leiden_with_timeout/heatmap_features_means_per_cluster.png" alt="heatmap_features_means_per_cluster">
                <p>
                    By digging a little deeper, we notice that leaving them in simply created an additional cluster with nearly all timed-out games. 
                    This makes sense many of our features depend on time, and so games with a time-out will be very different from other games in terms of time
                    and will therefore form a separate cluster.
                </p>
                <img src="src/figures/leiden_with_timeout/number_of_timeouts_per_cluster.png" alt="number_of_timeouts_per_cluster">
                <!--Umap-->
                <iframe class="interactive-plot" src="src/figures/leiden/umap_leiden.html" height="600px" width="800px" frameborder="0"></iframe>
                <!--Train set features-->

            </div>
        </section>

        <section class="content" id="section6">
            <div class="item">
                <h2>
                    validation
                </h2>
                <p>
                    In order to check the Leiden clustering's robustness, we used 5-fold cross-validation.
                    Due to the clusters not having a fixed ID across runs, we performed matching using the clustroids nearest
                    to those in a given fold across other folds. Once this is done, we can plot the original clustroids and
                    coarse_mean_time_histogram nearest neighbors across folds, and see how close they are in the UMAP
                    embedding space.
                    From the following plot, we see they are quite close to each other !
                </p>s
                <iframe src="src/figures/validation/clustroids_variability.html" frameborder="0" class="interactive-plot" height="600px" width="800px"></iframe>
            </div>


    </div>
</body>
<footer>
    Datastory by:
    <div class="authors">
        <div class="author">
            Cyril Achard
        </div>
        <div class="author">
            David Revaz
        </div>
        <div class="author">
            Laurent Brock

        </div>
        <div class="author">
            Mathilde Morelli
        </div>
        <div class="author">
            
            Yves Paychère
        </div>
    </div>
</footer>
</html>

<!-- <div class="item">
    <iframe class="interactive-plot" src="src/figures/validation/clustroids_variability.html" height="600px" width="800px"></iframe>
</div> -->